#nginx高效表现
------
##nginx采用一个master管理进程，多个worker工作进程的设计方式，主要有以下优点：
> * 利用多核系统的并发处理能力
> * 负载均衡
> * 管理进程会负责监控工作进程的状态，并负责管理其行为。
重启说明：nginx早期版本可通过HUP信号来进行重启，加载新配置，重启的过程会先启动新的worker
进程，并向所有老的worker进程发送信号，告诉他们已经光荣退休了，新的worker在启动后，就开始
接受新请求，老请求便会在处理完当前请求后，退出。
##nginx使用内存池进行资源管理：
为了避免出现内存碎片，减少向操作系统申请内存的次数，降低各个模块申请/释放内存导致的问题。
nginx设计了自己的内存池，仅用作分配给应用程序使用，不进行回收。每一个tpc连接都分配了一个
内存池，http请求也会单独分配，请求完成后，一次性归还给操作系统。
##nginx使用了epoll进行文件描述符管理。
epoll有优秀的io管理能力，主要在以下方面：
> * 内核空间与用户空间通过mmap维护一段共享内存进行fd共享，免去拷贝过程。
> * 就绪队列通过双向链表维护，fd通过红黑树进行管理检索，fd的事件修改通过系统调用epoll_ctl系统调用来操作。
> * 某个fd就绪之后，通过回调函数获取fd数值，通过红黑树获取
##nginx可以的代理能力。
代理可以分为正向代理和反向代理。
正向即是隐藏了客户端，客户端都是通过代理服务器来访问服务端。作用：1.访问原来无法访问的资源。2.可以做缓存，加速访问速度，减少服务端压力。
3.对客户端进行访问授权，进行流量控制/访问认证等。4.代理可以做访问记录，对外隐藏用户信息。epoll管理内容结构体，并移动至就绪队列中。
> * 支持两种模式，边缘触发和水平触发，且支持epoll_oneshot模式（此模式存在的意义是当一个传输数据的socket被注册了读事件后，如果有数据则会触发调起一个线程来处理，
但是当开始处理该数据时，又有数据过来触发读事件，如果是前两种模式会多次触发调起不同的线程处理，one_shot保证了，如果该事件正在处理中，则不会再触发，保证了
同一个socket连接，在任意时间都是同一个线程来处理）
反向则是隐藏了服务端，服务端将数据交付给代理服务器，可以保证压力/攻击都直接先打到代理服务器，不会直接影响后端服务器。也可做负载均衡。
nginx就是性能很好的反向代理服务器。
NGINX的三大优点：反向代理，负载均衡，动静分离（nginx对静态文件的处理能力很好，但是动态执行能力基本）
